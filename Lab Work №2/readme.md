## Диаграмма системного контекста
Основные элементы:

- Пользоваетль взаимодейтсвует с систмемой через тг-бота для ответа на его вопрос по C# или же оформления отчётов по Гостам
- Система управляет типом ответа (прямой или наводящий) в зависимости от того кто именно заадал вопрос (преподаватель или студент).
- рагнутая ИИ моделей выступает как внешняя система, предоставляющая ответы через API  

![alt text](image.png)
## Диаграмма контейнеров
Стиль: **Почти** микросервисная архитектура
1. Есть несколько независимых сервисов, каждый решает свою задачу:
    - “Сервис общий” (он же основной backend), который получает запросы от бота, обрабатывает логику, маршрутизирует их.
    - ИИ-модель (отдельный сервис/модуль), выполняющий генерацию или анализ текстов.
    - Сервис авторизации (внешний или выделенный), отвечающий за аутентификацию и проверку прав доступа.
2. Хранение данных разделено на:
    - Основную БД (реляционную) для пользовательских данных, проектов, статистики.
    - Векторную БД для семантических эмбеддингов (нужна именно для AI-задач).
3. Гибкость в дальнейшем развитии:
    - Можно менять или улучшать ИИ-модель, не затрагивая всю систему.
    - При увеличении нагрузки есть возможность масштабировать один из сервисов (например, ИИ-модель) отдельно.

![alt text](image-1.png)

## Диаграмма компонентов

**Компоненты «Сервиса общего» (Backend)**
![alt text](image-2.png)
1. Bot Handler:
    - Задача: Принимает входящие сообщения или запросы от Телеграм-бота (через Telegram API).
    - Функции:
        1. Получает текст или команды от пользователя.
        2. Формирует первичный объект запроса и передаёт дальше в Сервис общий.

2. Сервис общий 
    - Задача: Ядро бизнес-логики — решает, что делать с запросом (обратиться ли к ИИ-модели, нужно ли сохранить что-то в БД и т.д.).
    - Функции:
        1. Анализирует тип вопроса (C#, ГОСТ и др.).
        2. Делает вызов к компоненте, взаимодействующей с ИИ-моделью (см. ИИ-прослойка), если требуется генерация ответа.
        3. Вызывает БД коннектор, если нужно получить/сохранить данные в обычной БД.
        4. При необходимости обращается к Auth Connector, чтобы проверить права пользователя.

3. ИИ-прослойка: 
    - Задача: Является прослойкой, которая отправляет запросы непосредственно в контейнер «ИИ-модель».
    - Функции:
        1. Формирует нужный формат данных для ИИ-модели (вопрос, контекст).
        2. Получает от неё результат (сформированный ответ, рекомендации и т.п.) и возвращает в Сервис общий.

4. БД коннектор: 
    - Задача: Управляет доступом к «Основной БД» (реляционной).
    - Функции:
        1. CRUD-операции по данным пользователей (проекты, история вопросов).
        2. Передача данных, полученных от Сервис общий к БД и обратно.

5. Auth Connector:
    - Задача: Взаимодействует с «Сервисом авторизации».
    - Функции:
        1. Направляет запросы для проверки токенов/прав пользователя.
        2. Получает информацию об успешной/неуспешной аутентификации.
        3. Возвращает результат в Logic Layer.

**Компоненты «ИИ-модели»**
![alt text](image-3.png)
1. ИИ модель
    - Задача: ИИ модель — здесь хранится и исполняется логика генерации ответов, NLP-модель и т.д.
    - Функции:
        1. Обработка входящего текста: генерация ответа по C# или правилам ГОСТ.

2. Preprocessing & Postprocessing
    - Задача: Выполняет необходимые преобразования входных/выходных данных (токенизация, очистка, форматирование).
    - Функции:
        1. При получении вопроса от “Сервиса общего” — парсит входной текст, нормализует и т.п.
        2. При генерации ответа — форматирует итоговый результат (например, добавляет markdown-код, ссылки и др.).

3. Embedding Manager
    - Задача: Управляет взаимодействием с векторными представлениями (если модель сама “ходит” в Векторную БД).
    - Функции:
        1. Генерирует векторные эмбеддинги для нового текста.
        2. Запрашивает похожие объекты в Векторной БД.

4. Model Handler
    - Задача: Принимает внешние запросы от компонента ИИ-пройслойка (из “Сервиса общего”).
    - Функции:
        1. Обеспечивает сетевой интерфейс (HTTP/gRPC и т.д.) для общения со сторонними сервисами.
        2. Сериализует/десериализует данные при взаимодействии с “Сервисом общим”.
